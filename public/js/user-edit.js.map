{"version":3,"sources":["webpack:///resources/js/components/ImageUpload.vue","webpack:///./resources/js/components/ImageUpload.vue?dacd","webpack:///./resources/js/components/ImageUpload.vue?056c","webpack:///./resources/js/components/ImageUpload.vue?8584","webpack:///./resources/js/components/ImageUpload.vue?3f42","webpack:///./resources/js/components/ImageUpload.vue?cc98","webpack:///./resources/js/plugins/objectToFormData.js","webpack:///./resources/js/pages/user/edit.vue?b1c1","webpack:///resources/js/pages/user/edit.vue","webpack:///./resources/js/pages/user/edit.vue?34d0","webpack:///./resources/js/pages/user/edit.vue"],"names":["name","props","data","image","imageBase64","computed","value","this","preview","defaultUrl","methods","setImage","type","match","formImagePropertyName","form","errors","clear","reader","FileReader","onload","readAsDataURL","$emit","content","module","i","options","transform","undefined","locals","exports","render","_vm","_h","$createElement","_c","_self","attrs","label","has","get","on","$event","$refs","fileInput","click","scopedSlots","_u","key","fn","proxy","_v","ref","staticClass","staticRenderFns","push","isArray","Array","objectToFormData","obj","fd","pre","FormData","forEach","Object","isObject","File","isFile","Date","isDate","append","keys","prop","length","lastIndexOf","substring","middleware","components","mixins","Form","metaInfo","changed","some","created","changeAvatar","$set","avatar","component","_s","$t","preventDefault","update","model","callback","$$v","formIsValid","expression","validationRequired","clearFormErrors","validationEmail","user","avatar_url","busy","VBtn","VCard","VCardText","VCol","VContainer","VForm","VRow","VSwitch","VTextField","VToolbar","VToolbarTitle"],"mappings":"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","file":"js/user-edit.js","sourcesContent":["<template>\n  <div>\n    <v-text-field\n      :value=\"value\"\n      :label=\"label\"\n      append-icon=\"mdi-paperclip\"\n      outlined\n      readonly\n      :error=\"formImagePropertyName && form.errors.has(formImagePropertyName)\"\n      :error-messages=\"formImagePropertyName ? form.errors.get(formImagePropertyName) : ''\"\n      @click:append=\"$refs.fileInput.click()\"\n    >\n      <template v-if=\"preview\" v-slot:prepend-inner>\n        <v-avatar size=\"28\" tile @click=\"$refs.fileInput.click()\">\n          <img :src=\"preview\" :alt=\"label\" />\n        </v-avatar>\n      </template>\n    </v-text-field>\n\n    <input ref=\"fileInput\" type=\"file\" class=\"d-none\" accept=\"image/*\" @change=\"setImage\">\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ImageUpload',\n\n  props: ['label', 'form', 'formImagePropertyName', 'defaultValue', 'defaultUrl'],\n\n  data () {\n    return {\n      image: null,\n      imageBase64: null\n    }\n  },\n\n  computed: {\n    value () {\n      return this.image ? this.image.name : (this.defaultValue || this.$t('Upload a new image'))\n    },\n    preview () {\n      return this.imageBase64 || this.defaultUrl\n    }\n  },\n\n  methods: {\n    setImage (event) {\n      const image = event.target.files[0]\n\n      // if uploaded file is an image\n      if (image && image.type.match(/^image\\/.*/)) {\n        if (this.formImagePropertyName) {\n          this.form.errors.clear(this.formImagePropertyName)\n        }\n\n        this.image = image\n\n        var reader = new FileReader()\n\n        // define a callback function to run, when FileReader finishes its job\n        reader.onload = e => { this.imageBase64 = e.target.result }\n\n        // Start the reader job - read file as a data url (base64 format)\n        reader.readAsDataURL(image)\n\n        this.$emit('change', image)\n      }\n    }\n  }\n}\n</script>\n<style scoped>\n.v-avatar {\n  cursor: pointer;\n}\n</style>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../node_modules/vuetify-loader/lib/loader.js??ref--11-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageUpload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../node_modules/vuetify-loader/lib/loader.js??ref--11-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageUpload.vue?vue&type=script&lang=js&\"","\nvar content = require(\"!!../../../node_modules/css-loader/index.js??ref--5-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--5-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--11-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageUpload.vue?vue&type=style&index=0&id=0b49606c&scoped=true&lang=css&\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js??ref--5-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--5-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--11-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageUpload.vue?vue&type=style&index=0&id=0b49606c&scoped=true&lang=css&\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js??ref--5-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--5-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--11-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageUpload.vue?vue&type=style&index=0&id=0b49606c&scoped=true&lang=css&\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-text-field',{attrs:{\"value\":_vm.value,\"label\":_vm.label,\"append-icon\":\"mdi-paperclip\",\"outlined\":\"\",\"readonly\":\"\",\"error\":_vm.formImagePropertyName && _vm.form.errors.has(_vm.formImagePropertyName),\"error-messages\":_vm.formImagePropertyName ? _vm.form.errors.get(_vm.formImagePropertyName) : ''},on:{\"click:append\":function($event){return _vm.$refs.fileInput.click()}},scopedSlots:_vm._u([(_vm.preview)?{key:\"prepend-inner\",fn:function(){return [_c('v-avatar',{attrs:{\"size\":\"28\",\"tile\":\"\"},on:{\"click\":function($event){return _vm.$refs.fileInput.click()}}},[_c('img',{attrs:{\"src\":_vm.preview,\"alt\":_vm.label}})])]},proxy:true}:null],null,true)}),_vm._v(\" \"),_c('input',{ref:\"fileInput\",staticClass:\"d-none\",attrs:{\"type\":\"file\",\"accept\":\"image/*\"},on:{\"change\":_vm.setImage}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!../../../node_modules/style-loader/index.js!../../../node_modules/css-loader/index.js??ref--5-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--5-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--11-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageUpload.vue?vue&type=style&index=0&id=0b49606c&scoped=true&lang=css&\"","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.v-avatar[data-v-0b49606c] {\\n  cursor: pointer;\\n}\\n\", \"\"]);\n\n// exports\n","function isUndefined (value) {\n  return value === undefined\n}\n\nfunction isObject (value) {\n  return value === Object(value)\n}\n\nfunction isArray (value) {\n  return Array.isArray(value)\n}\n\nfunction isFile (value) {\n  return value instanceof File\n}\n\nfunction isDate (value) {\n  return value instanceof Date\n}\n\nexport default function objectToFormData (obj, fd, pre) {\n  fd = fd || new FormData()\n\n  if (isUndefined(obj)) {\n    return fd\n  } else if (isArray(obj)) {\n    obj.forEach(function (value) {\n      var key = pre + '[]'\n\n      objectToFormData(value, fd, key)\n    })\n  } else if (isObject(obj) && !isFile(obj) && !isDate(obj)) {\n    Object.keys(obj).forEach(function (prop) {\n      var value = obj[prop]\n\n      if (isArray(value)) {\n        while (prop.length > 2 && prop.lastIndexOf('[]') === prop.length - 2) {\n          prop = prop.substring(0, prop.length - 2)\n        }\n      }\n\n      var key = pre ? (pre + '[' + prop + ']') : prop\n\n      objectToFormData(value, fd, key)\n    })\n  } else {\n    fd.append(pre, obj)\n  }\n\n  return fd\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fluid\":\"\"}},[_c('v-row',{attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"8\",\"md\":\"6\",\"lg\":\"4\"}},[_c('v-card',[_c('v-toolbar',[_c('v-toolbar-title',[_vm._v(\"\\n            \"+_vm._s(_vm.$t('Profile'))+\"\\n          \")])],1),_vm._v(\" \"),_c('v-card-text',[_c('v-form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.update($event)}},model:{value:(_vm.formIsValid),callback:function ($$v) {_vm.formIsValid=$$v},expression:\"formIsValid\"}},[_c('v-text-field',{attrs:{\"label\":_vm.$t('Name'),\"type\":\"text\",\"name\":\"name\",\"rules\":[_vm.validationRequired],\"error\":_vm.form.errors.has('name'),\"error-messages\":_vm.form.errors.get('name'),\"outlined\":\"\"},on:{\"keydown\":function($event){return _vm.clearFormErrors($event,'name')}},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}}),_vm._v(\" \"),_c('v-text-field',{attrs:{\"label\":_vm.$t('Email'),\"type\":\"email\",\"name\":\"email\",\"rules\":[_vm.validationRequired, _vm.validationEmail],\"error\":_vm.form.errors.has('email'),\"error-messages\":_vm.form.errors.get('email'),\"outlined\":\"\"},on:{\"keydown\":function($event){return _vm.clearFormErrors($event,'email')}},model:{value:(_vm.form.email),callback:function ($$v) {_vm.$set(_vm.form, \"email\", $$v)},expression:\"form.email\"}}),_vm._v(\" \"),_c('image-upload',{attrs:{\"label\":_vm.$t('Avatar'),\"form\":_vm.form,\"form-image-property-name\":\"avatar\",\"default-value\":_vm.user.avatar,\"default-url\":_vm.user.avatar_url},on:{\"change\":_vm.changeAvatar}}),_vm._v(\" \"),_c('v-switch',{attrs:{\"label\":_vm.$t('Hide profit'),\"color\":\"primary\",\"false-value\":false,\"true-value\":true},model:{value:(_vm.form.hide_profit),callback:function ($$v) {_vm.$set(_vm.form, \"hide_profit\", $$v)},expression:\"form.hide_profit\"}}),_vm._v(\" \"),_c('v-btn',{attrs:{\"type\":\"submit\",\"color\":\"primary\",\"disabled\":!_vm.formIsValid || !_vm.changed || _vm.form.busy,\"loading\":_vm.form.busy}},[_vm._v(\"\\n              \"+_vm._s(_vm.$t('Save'))+\"\\n            \")])],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container fluid>\n    <v-row align=\"center\" justify=\"center\">\n      <v-col cols=\"12\" sm=\"8\" md=\"6\" lg=\"4\">\n        <v-card>\n          <v-toolbar>\n            <v-toolbar-title>\n              {{ $t('Profile') }}\n            </v-toolbar-title>\n          </v-toolbar>\n          <v-card-text>\n            <v-form v-model=\"formIsValid\" @submit.prevent=\"update\">\n              <v-text-field\n                v-model=\"form.name\"\n                :label=\"$t('Name')\"\n                type=\"text\"\n                name=\"name\"\n                :rules=\"[validationRequired]\"\n                :error=\"form.errors.has('name')\"\n                :error-messages=\"form.errors.get('name')\"\n                outlined\n                @keydown=\"clearFormErrors($event,'name')\"\n              />\n\n              <v-text-field\n                v-model=\"form.email\"\n                :label=\"$t('Email')\"\n                type=\"email\"\n                name=\"email\"\n                :rules=\"[validationRequired, validationEmail]\"\n                :error=\"form.errors.has('email')\"\n                :error-messages=\"form.errors.get('email')\"\n                outlined\n                @keydown=\"clearFormErrors($event,'email')\"\n              />\n\n              <image-upload\n                :label=\"$t('Avatar')\"\n                :form=\"form\"\n                form-image-property-name=\"avatar\"\n                :default-value=\"user.avatar\"\n                :default-url=\"user.avatar_url\"\n                @change=\"changeAvatar\"\n              />\n\n              <v-switch\n                v-model=\"form.hide_profit\"\n                :label=\"$t('Hide profit')\"\n                color=\"primary\"\n                :false-value=\"false\"\n                :true-value=\"true\"\n              />\n\n              <v-btn type=\"submit\" color=\"primary\" :disabled=\"!formIsValid || !changed || form.busy\" :loading=\"form.busy\">\n                {{ $t('Save') }}\n              </v-btn>\n            </v-form>\n          </v-card-text>\n        </v-card>\n      </v-col>\n    </v-row>\n  </v-container>\n</template>\n\n<script>\nimport Form from 'vform'\nimport FormMixin from '~/mixins/Form'\nimport ImageUpload from '~/components/ImageUpload'\nimport { mapState } from 'vuex'\nimport objectToFormData from '~/plugins/objectToFormData'\n\nexport default {\n  middleware: ['auth', 'verified', '2fa_passed'],\n\n  components: { ImageUpload },\n\n  mixins: [FormMixin],\n\n  metaInfo () {\n    return { title: this.$t('Profile') }\n  },\n\n  data: () => ({\n    form: new Form({\n      name: null,\n      email: null,\n      hide_profit: null\n    })\n  }),\n\n  computed: {\n    ...mapState('auth', [\n      'user'\n    ]),\n    changed () {\n      return this.form.keys().some(key => this.form[key] !== this.user[key])\n    }\n  },\n\n  created () {\n    // Fill the form with user data.\n    this.form.keys().forEach(key => {\n      this.form[key] = this.user[key]\n    })\n  },\n\n  methods: {\n    changeAvatar (avatar) {\n      this.$set(this.form, 'avatar', avatar)\n    },\n    async update () {\n      // transform form data to FormData if avatar is uploaded\n      const options = this.form.avatar ? { transformRequest: [(data, headers) => objectToFormData(data)] } : {}\n\n      const { data } = await this.form.submit('post', '/api/user/update', options)\n\n      this.$store.dispatch('auth/updateUser', data)\n\n      this.$store.dispatch('message/success', { text: this.$t('Data successfully updated.') })\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vuetify-loader/lib/loader.js??ref--11-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vuetify-loader/lib/loader.js??ref--11-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./edit.vue?vue&type=template&id=a67896d2&\"\nimport script from \"./edit.vue?vue&type=script&lang=js&\"\nexport * from \"./edit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSwitch } from 'vuetify/lib/components/VSwitch';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VBtn,VCard,VCardText,VCol,VContainer,VForm,VRow,VSwitch,VTextField,VToolbar,VToolbarTitle})\n"],"sourceRoot":""}