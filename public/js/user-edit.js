(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{NtJJ:function(e,r,t){"use strict";var a={name:"ImageUpload",props:["label","form","formImagePropertyName","defaultValue","defaultUrl"],data:function(){return{image:null,imageBase64:null}},computed:{value:function(){return this.image?this.image.name:this.defaultValue||this.$t("Upload a new image")},preview:function(){return this.imageBase64||this.defaultUrl}},methods:{setImage:function(e){var r=this,t=e.target.files[0];if(t&&t.type.match(/^image\/.*/)){this.formImagePropertyName&&this.form.errors.clear(this.formImagePropertyName),this.image=t;var a=new FileReader;a.onload=function(e){r.imageBase64=e.target.result},a.readAsDataURL(t),this.$emit("change",t)}}}};r.a=a},OxRk:function(e,r,t){var a=t("YHj/");"string"==typeof a&&(a=[[e.i,a,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};t("aET+")(a,n);a.locals&&(e.exports=a.locals)},WKyu:function(e,r,t){"use strict";t.d(r,"a",(function(){return a})),t.d(r,"b",(function(){return n}));var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("v-text-field",{attrs:{value:e.value,label:e.label,"append-icon":"mdi-paperclip",outlined:"",readonly:"",error:e.formImagePropertyName&&e.form.errors.has(e.formImagePropertyName),"error-messages":e.formImagePropertyName?e.form.errors.get(e.formImagePropertyName):""},on:{"click:append":function(r){return e.$refs.fileInput.click()}},scopedSlots:e._u([e.preview?{key:"prepend-inner",fn:function(){return[t("v-avatar",{attrs:{size:"28",tile:""},on:{click:function(r){return e.$refs.fileInput.click()}}},[t("img",{attrs:{src:e.preview,alt:e.label}})])]},proxy:!0}:null],null,!0)}),e._v(" "),t("input",{ref:"fileInput",staticClass:"d-none",attrs:{type:"file",accept:"image/*"},on:{change:e.setImage}})],1)},n=[]},XT1U:function(e,r,t){"use strict";t("OxRk")},"YHj/":function(e,r,t){(e.exports=t("I1BE")(!1)).push([e.i,"\n.v-avatar[data-v-0b49606c] {\r\n  cursor: pointer;\n}\r\n",""])},"gA+b":function(e,r,t){"use strict";function a(e){return Array.isArray(e)}function n(e,r,t){return r=r||new FormData,void 0===e||(a(e)?e.forEach((function(e){n(e,r,t+"[]")})):!function(e){return e===Object(e)}(e)||function(e){return e instanceof File}(e)||function(e){return e instanceof Date}(e)?r.append(t,e):Object.keys(e).forEach((function(o){var i=e[o];if(a(i))for(;o.length>2&&o.lastIndexOf("[]")===o.length-2;)o=o.substring(0,o.length-2);n(i,r,t?t+"["+o+"]":o)}))),r}t.d(r,"a",(function(){return n}))},iotO:function(e,r,t){"use strict";t.r(r);var a=t("o0o1"),n=t.n(a),o=t("4HBT"),i=t.n(o),s=t("C3Ci"),u=t("c2kw"),l=t("L2JU"),c=t("gA+b");function f(e,r,t,a,n,o,i){try{var s=e[o](i),u=s.value}catch(e){return void t(e)}s.done?r(u):Promise.resolve(u).then(a,n)}function m(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,a)}return t}function d(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?m(Object(t),!0).forEach((function(r){p(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function p(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var v={middleware:["auth","verified","2fa_passed"],components:{ImageUpload:u.a},mixins:[s.a],metaInfo:function(){return{title:this.$t("Profile")}},data:function(){return{form:new i.a({name:null,email:null,hide_profit:null})}},computed:d(d({},Object(l.d)("auth",["user"])),{},{changed:function(){var e=this;return this.form.keys().some((function(r){return e.form[r]!==e.user[r]}))}}),created:function(){var e=this;this.form.keys().forEach((function(r){e.form[r]=e.user[r]}))},methods:{changeAvatar:function(e){this.$set(this.form,"avatar",e)},update:function(){var e,r=this;return(e=n.a.mark((function e(){var t,a,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.form.avatar?{transformRequest:[function(e,r){return Object(c.a)(e)}]}:{},e.next=3,r.form.submit("post","/api/user/update",t);case 3:a=e.sent,o=a.data,r.$store.dispatch("auth/updateUser",o),r.$store.dispatch("message/success",{text:r.$t("Data successfully updated.")});case 7:case"end":return e.stop()}}),e)})),function(){var r=this,t=arguments;return new Promise((function(a,n){var o=e.apply(r,t);function i(e){f(o,a,n,i,s,"next",e)}function s(e){f(o,a,n,i,s,"throw",e)}i(void 0)}))})()}}},h=t("KHd+"),g=t("ZUTo"),b=t.n(g),y=t("gzZi"),w=t("sK+t"),O=t("mdmw"),x=t("Yq0q"),I=t("pSOK"),k=t("S9TP"),P=t("D9m0"),_=t("tz1R"),j=t("hlRy"),$=t("cdmR"),V=t("Kn9U"),E=Object(h.a)(v,(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("v-container",{attrs:{fluid:""}},[t("v-row",{attrs:{align:"center",justify:"center"}},[t("v-col",{attrs:{cols:"12",sm:"8",md:"6",lg:"4"}},[t("v-card",[t("v-toolbar",[t("v-toolbar-title",[e._v("\n            "+e._s(e.$t("Profile"))+"\n          ")])],1),e._v(" "),t("v-card-text",[t("v-form",{on:{submit:function(r){return r.preventDefault(),e.update(r)}},model:{value:e.formIsValid,callback:function(r){e.formIsValid=r},expression:"formIsValid"}},[t("v-text-field",{attrs:{label:e.$t("Name"),type:"text",name:"name",rules:[e.validationRequired],error:e.form.errors.has("name"),"error-messages":e.form.errors.get("name"),outlined:""},on:{keydown:function(r){return e.clearFormErrors(r,"name")}},model:{value:e.form.name,callback:function(r){e.$set(e.form,"name",r)},expression:"form.name"}}),e._v(" "),t("v-text-field",{attrs:{label:e.$t("Email"),type:"email",name:"email",rules:[e.validationRequired,e.validationEmail],error:e.form.errors.has("email"),"error-messages":e.form.errors.get("email"),outlined:""},on:{keydown:function(r){return e.clearFormErrors(r,"email")}},model:{value:e.form.email,callback:function(r){e.$set(e.form,"email",r)},expression:"form.email"}}),e._v(" "),t("image-upload",{attrs:{label:e.$t("Avatar"),form:e.form,"form-image-property-name":"avatar","default-value":e.user.avatar,"default-url":e.user.avatar_url},on:{change:e.changeAvatar}}),e._v(" "),t("v-switch",{attrs:{label:e.$t("Hide profit"),color:"primary","false-value":!1,"true-value":!0},model:{value:e.form.hide_profit,callback:function(r){e.$set(e.form,"hide_profit",r)},expression:"form.hide_profit"}}),e._v(" "),t("v-btn",{attrs:{type:"submit",color:"primary",disabled:!e.formIsValid||!e.changed||e.form.busy,loading:e.form.busy}},[e._v("\n              "+e._s(e.$t("Save"))+"\n            ")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);r.default=E.exports;b()(E,{VBtn:y.a,VCard:w.a,VCardText:O.c,VCol:x.a,VContainer:I.a,VForm:k.a,VRow:P.a,VSwitch:_.a,VTextField:j.a,VToolbar:$.a,VToolbarTitle:V.a})}}]);
//# sourceMappingURL=user-edit.js.map