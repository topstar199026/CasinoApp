(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{"/a6j":function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return n}));var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-text-field",{attrs:{value:e.path,label:e.label,disabled:e.disabled||e.form.busy,"append-icon":"mdi-paperclip","append-outer-icon":e.preview&&e.clearable?"mdi-delete":"",outlined:"",readonly:"",error:!!e.error,"error-messages":e.error},on:{"click:append":function(t){return e.$refs.input.click()},"click:append-outer":e.clear},scopedSlots:e._u([{key:"prepend-inner",fn:function(){return[r("v-avatar",{attrs:{height:"28",width:"auto","max-width":"56",tile:""},on:{click:function(t){!e.disabled&&e.$refs.input.click()}}},[e.preview?r("img",{attrs:{src:e.preview,alt:e.label,disabled:e.disabled||e.form.busy}}):r("v-icon",{attrs:{disabled:e.disabled||e.form.busy}},[e._v("\n          mdi-image-outline\n        ")])],1)]},proxy:!0}])}),e._v(" "),r("input",{ref:"input",staticClass:"d-none",attrs:{type:"file",accept:e.accept},on:{change:e.uploadFile}})],1)},n=[]},"1QVv":function(e,t,r){"use strict";r("7fuB")},"7fuB":function(e,t,r){var a=r("CvJc");"string"==typeof a&&(a=[[e.i,a,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};r("aET+")(a,n);a.locals&&(e.exports=a.locals)},CvJc:function(e,t,r){(e.exports=r("I1BE")(!1)).push([e.i,"\n.v-avatar[data-v-537dd812] {\n  cursor: pointer;\n}\n",""])},KSds:function(e,t,r){"use strict";t.a={props:["id","small"]}},QGas:function(e,t,r){"use strict";var a=r("o0o1"),n=r.n(a),i=r("4HBT"),o=r.n(i),s=r("gA+b");function l(e,t,r,a,n,i,o){try{var s=e[i](o),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(a,n)}var u={props:{label:{type:String,required:!0},value:{validator:function(e){return"string"==typeof e||null===e},required:!0},accept:{type:String,required:!1,default:"image/*"},name:{type:String,required:!0},folder:{type:String,required:!0},clearable:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1}},data:function(){return{error:null,imageBase64:null,form:new o.a({file:null,name:this.name,folder:this.folder}),uploadedFilePath:null}},computed:{path:function(){return this.form.busy?this.$t("Uploading..."):!this.uploadedFilePath&&!this.value||""===this.uploadedFilePath?this.$t("Upload a file"):this.uploadedFilePath||this.displayValue},preview:function(){return this.imageBase64||this.displayValue},displayValue:function(){return this.value&&!this.value.match(/\//)?"/storage/".concat(this.folder,"/").concat(this.value):this.value}},watch:{uploadedFilePath:function(e){this.$emit("input",e)}},methods:{clear:function(){this.uploadedFilePath="",this.imageBase64=null},uploadFile:function(e){var t,r=this;return(t=n.a.mark((function t(){var a,i,o,l,u;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.error=null,r.form.file=e.target.files[0],!r.form.file){t.next=12;break}return(i=new FileReader).onload=function(e){a=e.target.result},i.readAsDataURL(r.form.file),o={transformRequest:[function(e,t){return Object(s.a)(e)}]},t.next=9,r.form.submit("post","/api/admin/files",o);case 9:l=t.sent,(u=l.data).success?(r.uploadedFilePath=u.path,r.imageBase64=a):r.error=u.message;case 12:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(a,n){var i=t.apply(e,r);function o(e){l(i,a,n,o,s,"next",e)}function s(e){l(i,a,n,o,s,"throw",e)}o(void 0)}))})()}}};t.a=u},aKRt:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return n}));var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-menu",{attrs:{"offset-y":!0,transition:"scroll-y-transition",bottom:"",left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({attrs:{icon:""}},a),[r("v-icon",{attrs:{small:e.small}},[e._v("mdi-dots-vertical")])],1)]}}])},[e._v(" "),r("v-list",[r("v-list-item",{attrs:{to:{name:"users.show",params:{id:e.id}},exact:""}},[r("v-list-item-icon",[r("v-icon",{attrs:{small:e.small}},[e._v("mdi-account")])],1),e._v(" "),r("v-list-item-content",[r("v-list-item-title",[e._v(e._s(e.$t("Profile")))])],1)],1),e._v(" "),r("v-list-item",{attrs:{to:{name:"admin.users.show",params:{id:e.id}},exact:""}},[r("v-list-item-icon",[r("v-icon",{attrs:{small:e.small}},[e._v("mdi-eye")])],1),e._v(" "),r("v-list-item-content",[r("v-list-item-title",[e._v(e._s(e.$t("View")))])],1)],1),e._v(" "),r("v-list-item",{attrs:{to:{name:"admin.users.edit",params:{id:e.id}},exact:""}},[r("v-list-item-icon",[r("v-icon",{attrs:{small:e.small}},[e._v("mdi-pencil")])],1),e._v(" "),r("v-list-item-content",[r("v-list-item-title",[e._v(e._s(e.$t("Edit")))])],1)],1),e._v(" "),r("v-list-item",{attrs:{to:{name:"admin.users.delete",params:{id:e.id}},exact:""}},[r("v-list-item-icon",[r("v-icon",{attrs:{small:e.small}},[e._v("mdi-delete")])],1),e._v(" "),r("v-list-item-content",[r("v-list-item-title",[e._v(e._s(e.$t("Delete")))])],1)],1),e._v(" "),r("v-list-item",{attrs:{to:{name:"admin.users.mail",params:{id:e.id}},exact:""}},[r("v-list-item-icon",[r("v-icon",{attrs:{small:e.small}},[e._v("mdi-email-outline")])],1),e._v(" "),r("v-list-item-content",[r("v-list-item-title",[e._v(e._s(e.$t("E-mail")))])],1)],1)],1)],1)},n=[]},aa1X:function(e,t,r){"use strict";r.r(t);var a=r("o0o1"),n=r.n(a),i=r("vDqi"),o=r.n(i),s=r("4HBT"),l=r.n(s),u=r("C3Ci"),c=r("lucQ"),d=r("Rc+0");function m(e,t,r,a,n,i,o){try{var s=e[i](o),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(a,n)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function o(e){m(i,a,n,o,s,"next",e)}function s(e){m(i,a,n,o,s,"throw",e)}o(void 0)}))}}var v={middleware:["auth","verified","2fa_passed","admin"],components:{FileUpload:r("uU2J").a,Preloader:d.a,UserMenu:c.a},mixins:[u.a],props:["id"],metaInfo:function(){return{title:this.$t("User {0}",[this.id])}},data:function(){return{user:null,roles:[],showPassword:!1,form:new l.a({name:null,email:null,role:null,avatar:null,status:null,hide_profit:null,banned_from_chat:null})}},computed:{changed:function(){var e=this;return this.form.keys().some((function(t){return e.user&&e.form[t]!==e.user[t]}))}},created:function(){var e=this;return f(n.a.mark((function t(){var r,a;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("/api/admin/users/".concat(e.id));case 2:r=t.sent,a=r.data,e.user=a.user,e.roles=Object.keys(a.roles).map((function(e){return{value:parseInt(e,10),text:a.roles[e]}})),e.form.keys().forEach((function(t){e.form[t]=e.user[t]}));case 7:case"end":return t.stop()}}),t)})))()},methods:{update:function(){var e=this;return f(n.a.mark((function t(){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.form.patch("/api/admin/users/".concat(e.id));case 2:e.$store.dispatch("message/success",{text:e.$t("User successfully updated.")}),e.$router.push({name:"admin.users.index"});case 4:case"end":return t.stop()}}),t)})))()}}},p=r("KHd+"),h=r("ZUTo"),b=r.n(h),_=r("gzZi"),w=r("sK+t"),y=r("mdmw"),g=r("Yq0q"),x=r("pSOK"),$=r("S9TP"),k=r("Ey0z"),V=r("D9m0"),P=r("uXRr"),F=r("MSko"),E=r("L6Q5"),S=r("tz1R"),B=r("hlRy"),q=r("cdmR"),R=r("Kn9U"),U=Object(p.a)(v,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-row",{attrs:{align:"center",justify:"center"}},[r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-card",[r("v-toolbar",[r("v-btn",{attrs:{icon:""},on:{click:function(t){return e.$router.go(-1)}}},[r("v-icon",[e._v("mdi-arrow-left")])],1),e._v(" "),r("v-toolbar-title",[e._v("\n            "+e._s(e.$t("User {0}",[e.id]))+"\n          ")]),e._v(" "),r("v-spacer"),e._v(" "),r("user-menu",{attrs:{id:e.id}}),e._v(" "),r("preloader",{attrs:{active:!e.user}})],1),e._v(" "),r("v-card-text",[r("v-form",{on:{submit:function(t){return t.preventDefault(),e.update(t)}},model:{value:e.formIsValid,callback:function(t){e.formIsValid=t},expression:"formIsValid"}},[r("v-text-field",{attrs:{label:e.$t("Name"),type:"text",disabled:e.form.busy||!e.user,rules:[e.validationRequired],error:e.form.errors.has("name"),"error-messages":e.form.errors.get("name"),outlined:""},on:{keydown:function(t){return e.clearFormErrors(t,"name")}},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e._v(" "),r("v-text-field",{attrs:{label:e.$t("Email"),type:"email",disabled:e.form.busy||!e.user,rules:[e.validationRequired,e.validationEmail],error:e.form.errors.has("email"),"error-messages":e.form.errors.get("email"),outlined:""},on:{keydown:function(t){return e.clearFormErrors(t,"email")}},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),e._v(" "),r("v-select",{attrs:{items:e.roles,label:e.$t("Role"),disabled:e.form.busy||!e.user,error:e.form.errors.has("role"),"error-messages":e.form.errors.get("role"),outlined:""},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}}),e._v(" "),e.user?r("file-upload",{attrs:{label:e.$t("Avatar"),name:e.user.id.toString(),path:"/storage/avatars",folder:"avatars"},model:{value:e.form.avatar,callback:function(t){e.$set(e.form,"avatar",t)},expression:"form.avatar"}}):e._e(),e._v(" "),r("v-text-field",{attrs:{label:e.$t("Password"),"append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",type:e.showPassword?"text":"password",disabled:e.form.busy||!e.user,error:e.form.errors.has("password"),"error-messages":e.form.errors.get("password"),hint:e.$t("Leave empty to preserve current user password."),"persistent-hint":"",outlined:"",counter:!0},on:{"click:append":function(t){e.showPassword=!e.showPassword},keydown:function(t){return e.clearFormErrors(t,"password")}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),e._v(" "),r("v-switch",{attrs:{label:e.$t("Blocked"),color:"primary",disabled:e.form.busy||!e.user,"false-value":0,"true-value":1},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}}),e._v(" "),r("v-switch",{attrs:{label:e.$t("Hide profit"),color:"primary",disabled:e.form.busy||!e.user,"false-value":!1,"true-value":!0},model:{value:e.form.hide_profit,callback:function(t){e.$set(e.form,"hide_profit",t)},expression:"form.hide_profit"}}),e._v(" "),r("v-switch",{attrs:{label:e.$t("Banned from chat"),color:"primary",disabled:e.form.busy||!e.user,"false-value":!1,"true-value":!0},model:{value:e.form.banned_from_chat,callback:function(t){e.$set(e.form,"banned_from_chat",t)},expression:"form.banned_from_chat"}}),e._v(" "),r("v-skeleton-loader",{attrs:{type:"button",loading:!e.user}},[r("v-btn",{attrs:{type:"submit",color:"primary",disabled:!e.formIsValid||!e.changed||e.form.busy,loading:e.form.busy}},[e._v("\n                "+e._s(e.$t("Save"))+"\n              ")])],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);t.default=U.exports;b()(U,{VBtn:_.a,VCard:w.a,VCardText:y.c,VCol:g.a,VContainer:x.a,VForm:$.a,VIcon:k.a,VRow:V.a,VSelect:P.a,VSkeletonLoader:F.a,VSpacer:E.a,VSwitch:S.a,VTextField:B.a,VToolbar:q.a,VToolbarTitle:R.a})},"gA+b":function(e,t,r){"use strict";function a(e){return Array.isArray(e)}function n(e,t,r){return t=t||new FormData,void 0===e||(a(e)?e.forEach((function(e){n(e,t,r+"[]")})):!function(e){return e===Object(e)}(e)||function(e){return e instanceof File}(e)||function(e){return e instanceof Date}(e)?t.append(r,e):Object.keys(e).forEach((function(i){var o=e[i];if(a(o))for(;i.length>2&&i.lastIndexOf("[]")===i.length-2;)i=i.substring(0,i.length-2);n(o,t,r?r+"["+i+"]":i)}))),t}r.d(t,"a",(function(){return n}))}}]);
//# sourceMappingURL=admin-users-edit.js.map